# aTES
 Awesome Task Exchange System

Компоненты системы:
Web-server(nginx) - ui (serve stating content)

Api Gateway как точка входа в бек системы + авторизация

таск-трекер сервис
Crud над действиями с таcками + паблишинг событий по таскам в mq
Db - postgresql

Аккаунтинг-сервис - расчет заработка, подписан на эвенты таск сервиса,паблишинг своих событий в mq
Db - postgresql

Сервис-аналитики  - api для отчетов + подписан на эвенты других сервисов
Db - postgresql

Общение между сервисами через асинхронно через mq
Поля и доменную модель с агрегатами еще не успел накидать.
В качестве межагрегатных ссылок применять первичные ключи.
Во составу эвентов пока еще не определился.

Деплой в кубер

 Service registry, Service Discovery , load balancing, Circuit Breakers ? Учитывая предполагаемые нагрузки можно пренебречь,Но по приколу можно и прикрутить.
 
Высокоуровневая схема прикреплена картинкой.
 
Проблемы:
1)потерянные эвенты, гарантированная доставка - использовать шаблон Публикация событий(публикует 

2)эвент в рамках транзакции бд сохраняя в отдельную таблицу, отдельный воркер читает и пушит в очередь)

3)дубликаты эвентов(проверки на стороне потребителя + идемпотентность),

4)при падении сети - ретрай на определенное количество попыток

5) правильность определения границ сервисов

